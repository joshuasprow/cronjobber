{{ template "layout" }}
{{ define "pages/logs" }}
  <!doctype html>
  <html>
    <head>
      {{ block "meta" . }}{{ end }}
      <title>
        {{ block "title" . }}cronjobber - logs{{ end }}
      </title>
      {{ block "css" . }}{{ end }}
      <style>
        ul {
          max-height: 400px;
          overflow: auto;
        }
      </style>
      {{ block "js" . }}{{ end }}
      <script src="https://unpkg.com/htmx.org@1.9.11/dist/ext/sse.js"></script>
    </head>
    <body>
      <main
        hx-get="/logs"
        hx-include="#container-inputs"
        hx-target="#logs"
        hx-trigger="load"
      >
        <h1>{{ .Pod }}</h1>
        {{ template "components/containerinputs" . }}
        <ul
          id="logs"
          hx-ext="sse"
          hx-swap="beforeend"
          hx-on::after-settle="this.scrollTo(0, this.scrollHeight);"
          sse-connect="/logs?namespace={{ .Namespace }}&pod={{ .Pod }}&name={{ .Name }}"
          sse-swap="log"
          style="scroll-behavior:smooth;"
        >
          {{ template "components/logs" . }}
        </ul>
      </main>
    </body>
  </html>
{{ end }}
